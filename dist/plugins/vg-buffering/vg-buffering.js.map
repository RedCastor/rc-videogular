{"version":3,"sources":["vg-buffering.js"],"names":["angular","module","run","$templateCache","put","directive","VG_STATES","VG_UTILS","restrict","require","templateUrl","elem","attrs","vgTemplate","link","scope","attr","API","showSpinner","spinnerClass","stop","isBuffering","css","hideSpinner","setState","onStateChange","state","STOP","onPlayerReady","isReady","isMobileDevice","$watch","newVal","oldVal","currentState"],"mappings":"AAqBA;;AACAA,QAAQC,OAAO,2CAA2C,IACrDC,IACD,EAAC,kBAAkB,SAAUC;IACzBA,eAAeC,IAAI,6BACf;KAIPC,UACD,eACA,EAAC,aAAa,YAAY,SAAUC,WAAWC;IAC3C,OAAO;QACHC,UAAU;QACVC,SAAS;QACTC,aAAa,SAAUC,MAAMC;YACzB,OAAOA,MAAMC,cAAc;;QAE/BC,MAAM,SAAUC,OAAOJ,MAAMK,MAAMC;YAC/BF,MAAMG,cAAc,SAASA;gBACzBH,MAAMI,eAAe;oBAACC,MAAMH,IAAII;;gBAChCV,KAAKW,IAAI,WAAW;;YAGxBP,MAAMQ,cAAc,SAASA;gBACzBR,MAAMI,eAAe;oBAACC,MAAMH,IAAII;;gBAChCV,KAAKW,IAAI,WAAW;;YAGxBP,MAAMS,WAAW,SAASA,SAASH;gBAC/B,IAAIA,aAAa;oBACbN,MAAMG;uBAEL;oBACDH,MAAMQ;;;YAIdR,MAAMU,gBAAgB,SAASA,cAAcC;gBACzC,IAAIA,UAAUpB,UAAUqB,MAAM;oBAC1BZ,MAAMQ;;;YAIdR,MAAMa,gBAAgB,SAASA,cAAcC;gBACzC,IAAIA,SAAS;oBACTd,MAAMQ;;;YAIdR,MAAMG;YAGN,IAAIX,SAASuB,kBAAkB;gBAC3Bf,MAAMQ;mBAEL;gBACDR,MAAMgB,OACF;oBACI,OAAOd,IAAIY;mBAEf,SAAUG,QAAQC;oBACd,IAAIhB,IAAIY,YAAY,QAAQG,WAAWC,QAAQ;wBAC3ClB,MAAMa,cAAcI;;;;YAMpCjB,MAAMgB,OACF;gBACI,OAAOd,IAAIiB;eAEf,SAAUF,QAAQC;gBACd,IAAID,WAAWC,QAAQ;oBACnBlB,MAAMU,cAAcO;;;YAKhCjB,MAAMgB,OACF;gBACI,OAAOd,IAAII;eAEf,SAAUW,QAAQC;gBACd,IAAID,WAAWC,QAAQ;oBACnBlB,MAAMS,SAASQ","file":"vg-buffering.js","sourcesContent":["/**\n * @license videogular v1.4.4 http://videogular.com\n * Two Fucking Developers http://twofuckingdevelopers.com\n * License: MIT\n */\n/**\n * @ngdoc directive\n * @name com.2fdevs.videogular.plugins.buffering.directive:vgBuffering\n * @restrict E\n * @description\n * Shows a spinner when Videogular is buffering or preparing the video player.\n *\n * <pre>\n * <videogular vg-theme=\"config.theme.url\" vg-autoplay=\"config.autoPlay\">\n *    <vg-media vg-src=\"sources\"></vg-media>\n *\n *    <vg-buffering></vg-buffering>\n * </videogular>\n * </pre>\n *\n */\n\"use strict\";\nangular.module(\"com.2fdevs.videogular.plugins.buffering\", [])\n    .run(\n    [\"$templateCache\", function ($templateCache) {\n        $templateCache.put(\"vg-templates/vg-buffering\",\n            '<div class=\"bufferingContainer\"><div ng-class=\"spinnerClass\" class=\"loadingSpinner\"></div></div>'\n        );\n    }]\n)\n    .directive(\n    \"vgBuffering\",\n    [\"VG_STATES\", \"VG_UTILS\", function (VG_STATES, VG_UTILS) {\n        return {\n            restrict: \"E\",\n            require: \"^videogular\",\n            templateUrl: function (elem, attrs) {\n                return attrs.vgTemplate || 'vg-templates/vg-buffering';\n            },\n            link: function (scope, elem, attr, API) {\n                scope.showSpinner = function showSpinner() {\n                    scope.spinnerClass = {stop: API.isBuffering};\n                    elem.css(\"display\", \"block\");\n                };\n\n                scope.hideSpinner = function hideSpinner() {\n                    scope.spinnerClass = {stop: API.isBuffering};\n                    elem.css(\"display\", \"none\");\n                };\n\n                scope.setState = function setState(isBuffering) {\n                    if (isBuffering) {\n                        scope.showSpinner();\n                    }\n                    else {\n                        scope.hideSpinner();\n                    }\n                };\n\n                scope.onStateChange = function onStateChange(state) {\n                    if (state === VG_STATES.STOP) {\n                        scope.hideSpinner();\n                    }\n                };\n\n                scope.onPlayerReady = function onPlayerReady(isReady) {\n                    if (isReady) {\n                        scope.hideSpinner();\n                    }\n                };\n\n                scope.showSpinner();\n\n                // Workaround for issue #16: https://github.com/2fdevs/videogular/issues/16\n                if (VG_UTILS.isMobileDevice()) {\n                    scope.hideSpinner();\n                }\n                else {\n                    scope.$watch(\n                        function () {\n                            return API.isReady;\n                        },\n                        function (newVal, oldVal) {\n                            if (API.isReady === true || newVal !== oldVal) {\n                                scope.onPlayerReady(newVal);\n                            }\n                        }\n                    );\n                }\n\n                scope.$watch(\n                    function () {\n                        return API.currentState;\n                    },\n                    function (newVal, oldVal) {\n                        if (newVal !== oldVal) {\n                            scope.onStateChange(newVal);\n                        }\n                    }\n                );\n\n                scope.$watch(\n                    function () {\n                        return API.isBuffering;\n                    },\n                    function (newVal, oldVal) {\n                        if (newVal !== oldVal) {\n                            scope.setState(newVal);\n                        }\n                    }\n                );\n            }\n        };\n    }\n    ]);\n"],"sourceRoot":"scripts/"}