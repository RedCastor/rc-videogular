"use strict";angular.module("com.2fdevs.videogular.plugins.dash",[]).directive("vgDash",["$window",function(s){return{restrict:"A",require:"^videogular",link:function(t,e,a,i){var n,r=/^application\/dash\+xml/i;"MediaSource"in s&&(t.isDASH=function(e){var a=r.test(e.type),t=e.src.indexOf&&0<e.src.indexOf(".mpd");return a||t},t.onSourceChange=function(e){var a=e.src;t.isDASH(e)?angular.isFunction(dashjs&&dashjs.MediaPlayer)?(n=dashjs.MediaPlayer().create()).initialize(i.mediaElement[0],a,i.autoPlay):((n=new MediaPlayer(new Dash.di.DashContext)).setAutoPlay(i.autoPlay),n.startup(),n.attachView(i.mediaElement[0]),n.attachSource(a)):n&&(n.reset(),n=null,i.mediaElement.attr("src",a),i.stop())},t.$watch(function(){return i.sources},function(e,a){t.onSourceChange(e[0])}))}}}]);