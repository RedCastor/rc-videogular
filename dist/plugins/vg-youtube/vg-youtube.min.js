!function(e){"use strict";var t=e.module("rc-videogular.plugins.youtube",[]);t.run(["$rootScope","$window",function(e,t){e.youtubeApiReady=!1,t.onYouTubeIframeAPIReady=function(){e.$apply(function(){e.youtubeApiReady=!0})};var n=document.createElement("script");n.src="https://www.youtube.com/iframe_api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a)}]),t.directive("vgYoutube",["$rootScope","$window","$timeout","$interval","VG_UTILS","VG_STATES","VG_VOLUME_KEY",function(t,n,a,r,i,o,u){return{restrict:"A",require:"^videogular",link:function(r,l,c,d){var m,s,f,_,y=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;function p(e){return e.match(y)[2]}function v(){d.onUpdateTime({target:d.mediaElement[0]})}function E(){s&&clearInterval(s)}function g(){if(d.mediaElement[0].__defineGetter__("currentTime",function(){return m.getCurrentTime()}),d.mediaElement[0].__defineSetter__("currentTime",function(e){return m.seekTo(e,!0)}),d.mediaElement[0].__defineGetter__("duration",function(){return m.getDuration()}),d.mediaElement[0].__defineGetter__("paused",function(){return m.getPlayerState()!=YT.PlayerState.PLAYING}),d.mediaElement[0].__defineGetter__("videoWidth",function(){return m.a.width}),d.mediaElement[0].__defineGetter__("videoHeight",function(){return m.a.height}),d.mediaElement[0].__defineGetter__("volume",function(){return m.getVolume()/100}),d.mediaElement[0].__defineSetter__("volume",function(e){return m.setVolume(100*e)}),d.mediaElement[0].__defineGetter__("playbackRate",function(){return m.getPlaybackRate()}),d.mediaElement[0].__defineSetter__("playbackRate",function(e){return m.setPlaybackRate(e)}),d.mediaElement[0].play=function(){m.playVideo()},d.mediaElement[0].pause=function(){m.pauseVideo()},v(),e.element(m.getIframe()).css({width:"100%",height:"100%"}),i.supportsLocalStorage()&&d.setVolume(parseFloat(n.localStorage.getItem(u)||"1")),d.currentState!==o.PLAY){var t=new CustomEvent("canplay");d.mediaElement[0].dispatchEvent(t),!0===d.autoPlay&&a(function(){d.play()})}else m.playVideo()}function S(e){var t;e.target;switch(e.data){case YT.PlayerState.ENDED:E(),d.onComplete();break;case YT.PlayerState.PLAYING:var n=new CustomEvent("playing");d.mediaElement[0].dispatchEvent(n),d.setState(o.PLAY),t=600,s&&E(),s=setInterval(v,t);break;case YT.PlayerState.PAUSED:d.currentState==o.PLAY&&d.setState(o.PAUSE),E();break;case YT.PlayerState.BUFFERING:var a=new CustomEvent("waiting");d.mediaElement[0].dispatchEvent(a);break;case YT.PlayerState.CUED:}}function h(e){var n,a;(a=e)&&a.match(y)?(n=e,m?m.cueVideoById({videoId:p(n)}):t.$watch("youtubeApiReady",function(e){e&&(m=new YT.Player(d.mediaElement[0],{videoId:p(n),playerVars:_,events:{onReady:g,onStateChange:S}}))})):m&&m.destroy()}f=null!==c.vgYoutube?c.vgYoutube.split(";"):null,_={controls:0,showinfo:0,rel:0,autoplay:0,start:0,iv_load_policy:1},null!==f&&f.forEach(function(e){var t=e.split("=");_.hasOwnProperty(t[0])&&(_[t[0]]=t[1]||0)}),r.$watch(function(){return d.sources},function(e,t){e&&e.length>0&&e[0].src?h(e[0].src.toString()):h(null)}),r.$on("$destroy",function(){E()})}}}])}(angular);